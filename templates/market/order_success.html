{% extends 'base.html' %}

{% block content %}
<div class="h-[calc(100vh-80px)] flex items-center justify-center p-4">
    <div class="max-w-md w-full bg-surface-dark border border-border-dark rounded-2xl p-8 shadow-2xl text-center relative overflow-hidden">
        <!-- Confetti Canvas -->
        <canvas id="success-confetti" class="absolute inset-0 pointer-events-none"></canvas>
        
        <!-- Icon -->
        <div class="w-20 h-20 bg-success/10 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce">
            <span class="material-symbols-outlined text-5xl text-success">check_circle</span>
        </div>
        
        <h1 class="text-3xl font-display font-bold text-white mb-2">Order Confirmed!</h1>
        <p class="text-gray-400 mb-8">Thank you for your purchase. A receipt has been sent to your email.</p>
        
        <div class="bg-surface-lighter rounded-xl p-4 mb-8 border border-border-dark text-left">
            <div class="flex justify-between mb-2">
                <span class="text-gray-500 text-xs uppercase font-bold">Transaction ID</span>
                <span class="text-white font-mono text-sm">#{{ transaction.id }}</span>
            </div>
            <div class="flex justify-between mb-2">
                <span class="text-gray-500 text-xs uppercase font-bold">Amount Paid</span>
                <span class="text-success font-mono font-bold">${{ transaction.amount }}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-500 text-xs uppercase font-bold">Item</span>
                <span class="text-white text-sm truncate max-w-[150px]">{{ transaction.product.title }}</span>
            </div>
        </div>
        
        <div class="space-y-3 relative z-10">
            <a href="{% url 'leave_review' transaction.id %}" class="block w-full py-3 bg-secondary hover:bg-secondary/90 text-black font-bold rounded-xl transition-all shadow-lg mb-2">
                LEAVE A REVIEW
            </a>
            <a href="{% url 'dashboard' %}" class="block w-full py-3 bg-primary hover:bg-orange-600 text-white font-bold rounded-xl transition-all shadow-lg shadow-orange-900/40">
                GO TO DASHBOARD
            </a>
            <a href="{% url 'home' %}" class="block w-full py-3 text-gray-400 hover:text-white font-bold text-sm transition-colors">
                Return Home
            </a>
        </div>
    </div>
</div>

<script>
    // Fire confetti on load
    document.addEventListener('DOMContentLoaded', () => {
        var duration = 3 * 1000;
        var animationEnd = Date.now() + duration;
        var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
        
        var interval = setInterval(function() {
            var timeLeft = animationEnd - Date.now();
            if (timeLeft <= 0) { return clearInterval(interval); }
            var particleCount = 50 * (timeLeft / duration);
            confetti(Object.assign({}, defaults, { particleCount, origin: { x: 0.5, y: 0.5 } }));
        }, 250);
    });
</script>
{% endblock %}
